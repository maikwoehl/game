<html>
<head>
<title>Techdemo</title>
<script src="engine/engine.js" type="text/javascript"></script>
<script src="engine/browserdetect.js" type="text/javascript"></script>
<script type="text/javascript">
window.onload = function()
{
    // Construct
    engine = new Engine(); // new object
    
    engine.init("canvas",document.getElementById("game")); // set canvas element
    engine.init("audio",document.getElementById('music')); // set audio element
    engine.init("video",document.getElementById("video")); // set video element
    
    engine.renderCanvas(600,600); // render canvas
    engine.renderAudio("assets/audio/soundtrack-example.ogg", "audio/ogg"); // render audio
    
    if (BrowserDetect.browser == "Opera")
    {
    	engine.renderVideo("assets/video/html5video.ogv", "video/ogg"); // render video
    }
    else {
    	engine.renderVideo("assets/video/html5video.mp4", "video/mp4"); // render video
    }
    
    engine.init("map", 16); // set map quad size
    
    
    // Main
    engine.setBackgroundColor("lightgreen"); // set background color
    engine.writeLogo("blue","25px",30,60); // write a logo in the canvas
    
    engine.addTile("grass", [14,1]); // Test Tile
    engine.addTile("grass", [0,13]); // Test Tile 2
    
    engine.setAudioVolume(0.3); // 30% audio volume 
    document.getElementById("music-volume").value = engine.get("audio").volume; // Display Audio Volume
        
    engine.setVideoControls(true); // Display Video Controls
    engine.get("video").setAttribute("width", 200);
    engine.get("video").setAttribute("height", 150);
    
    engine.get("canvas").addEventListener('click', function() {
        engine.get("audio").play(); // play on canvas-click
    });
    
    window.onkeydown = function (event) {
        console.log("Keycode:"+event.which); // Key Logger
        if (event.which==27) { engine.get("audio").pause(); }; // Pause on ESC
    };
    
    volumeEntry = document.getElementById("music-volume"); // Volume Range Setter
    volumeEntry.addEventListener('keydown', function(event) { 
        if (event.which == 13) { // Hit Enter
            engine.get("audio").volume = parseFloat(volumeEntry.value); // set new audio value
            //volumeEntry.value = engine.get("audio").volume; // load new audio value into volumeEntry
        }
    });
    
    logo = new Image();
    logo.src = "assets/images/logos/logo-das.png";
    engine.get("context").drawImage(logo,-100,20);
    
}
</script>
</head>
<body>
<h1>Techdemo</h1>
<i>Hit with your left mouse button into the canvas to start music. Type number(0.0-1.0) and hit [Enter]. Hit ESC to stop music.</i>
<input type="number" id="music-volume" min="0.0" max="1.0" step="0.1" />
<br />
<canvas id="game"></canvas>
<audio id="music"></audio>
<video id="video"></video>
</body>
</html>
